I"F<p>So the frontend is finished and is available in <a href="https://www.maikel.uk/project" title="https://www.maikel.uk/project">https://www.maikel.uk/project</a></p>

<p>Now I’m checking whether I’ve forgotten anything the project must or should do.</p>

<p>Doing changes and deploying those changes to the server is quite a hindrance so I’m investingating about Gulp, a task runner on Javascript.</p>

<p>Sources:</p>

<p>So far this is what I’m doing:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">const</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">gulp</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Clean the dist directory in frontend</span>
<span class="c1">// Clean the views directory in backend</span>
<span class="c1">// build the frontend</span>
<span class="c1">// Copy the frontend to th ebackend views folder.</span>
<span class="c1">// Git update both.</span>
  
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">default</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">]);</span></code></pre></figure>

<p>Now I just have to fill the blanks.</p>

<p>So now I have an environment in which I can change stuff in the frontend, run gulp and it amends it on the server.</p>

<p>Now I’m doing the Terraform bit to get the infraestructure as code, one of the main deliverables.</p>

<h2 id="a-few-days-later">A few days later…</h2>

<p>This has taken me ages to accomplish but finally I manage to create the entire site as code. Terraform is a pain in the arse but once it works you fall in love with it. The problem is not what you tell it to do but what you don’t. It keeps asking for more details until everything falls into the same VPC, same subnets, right availability zones, etc.</p>

<p><img src="/uploads/2018/07/04/shitesite.PNG" alt="" /></p>

<p>I don’t think many people can understand my happiness when this all finally worked. It’s done, I’ve got <strong>one of the deliverables</strong>. Yay!</p>

<h2 id="but-how-about-the-workload">But how about the workload?</h2>

<p>I have no way right now to test the website underload so I have to emulate it in an API call.</p>

<p>This is what I’m going to use.</p>

<p><a href="https://github.com/lloyd/node-toobusy" title="https://github.com/lloyd/node-toobusy">https://github.com/lloyd/node-toobusy</a></p>

<p>With that I can make the site unresponsive when is too busy and I can also set workload.</p>

<p>I’m giving it an API call of /makemebusy</p>

<p>That didn’t work so I’m going for</p>

<p><a href="https://www.npmjs.com/package/toobusy-js" title="https://www.npmjs.com/package/toobusy-js">https://www.npmjs.com/package/toobusy-js</a></p>

<h2 id="real-problems">Real problems</h2>

<p>So I had problems with the deliverables I have to had ready for this TMA, a big major problem is Test-Driven Angular, another one is to make the app bilingual, something I thought it was a “nice to have feature” that shouldn’t be in the final ones. The literature bit of this TMA is very weird compared to the previous TMA and the fact that the formatting has radically changed compared to the previous one, dropping sections I found necessary isn’t helping either.</p>

<p>Putting the site behind a load-balancer and finding out the right configuration for AWS took a lot of effort, let alone how to write the right Terraform code. For a time I thought I might had to give up onn that, which is central to this project so I’m glad I managed to fix it at the end.</p>

<p>Then instances were all above 89% and I fixed it.</p>

<h1 id="what-i-should-put-on-the-appendix">What I should put on the Appendix</h1>

<ol>
  <li>Infrastructure as code</li>
  <li>Parts of the front-end</li>
</ol>

<p>Right, TMA sent.</p>
:ET